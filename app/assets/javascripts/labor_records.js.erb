function EmployeeAmounts(employee_id) {
  this.employee_id = employee_id;

  this.getRates = function(hours) {
    $.get("/employees/" + this.employee_id + "/rates", function( response ) {
      var before = response.inclusive_rate * hours;
      var after = response.exclusive_rate * hours;
      $("#labor_record_total_before").val(before.toFixed(2));
      $("#labor_record_total_after").val(after.toFixed(2));
    });
  }
}

function update_fields() {
  var id = $("#labor_record_employee_id").val();
  var hrs = $("#labor_record_hours").val();

  if (Number.isInteger(parseInt(id)) && !(isNaN(parseFloat(hrs)))) {
    var empAmts = new EmployeeAmounts(id, parseFloat(hrs));
    empAmts.getRates(hrs);
  }
}

$(document).ready(function() {

  $('#labor_record_hours').change(function() {
    var inputHours = $('#labor_record_hours').val();
    if ( !(isNaN(inputHours))) {
      update_fields();
    }

  });

  $('#labor_record_employee_id').change(function() {
    var inputId = $('#labor_record_employee_id').val();
    if(Number.isInteger(parseInt(inputId))) {
      update_fields();
    } 
  });
});
