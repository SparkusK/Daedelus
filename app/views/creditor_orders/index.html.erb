<p id="notice"><%= notice %></p>

<section class="header">
  <div class="d-flex justify-content-between">
    <h1 class="col-md-4">Creditor Orders</h1>
    <section class="search-form col-md-8">
      <%= form_for :employees, method: :get do |f| %>
        <div class="input-group input-group-lg">
          <%= label_tag :keywords, nil, class: "sr-only" %>
          <%= text_field_tag :keywords, nil,
                placeholder: "Supplier name or invoice code",
                class: "form-control input-lg" %>
          <span class="input-group-btn">
            <%= submit_tag "Find Creditor Orders",
                  class: "btn btn-primary btn-lg" %>
          </span>
        </div>
      <% end %>
    </section>
  </div>
</section>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Supplier</th>
      <th>Job</th>
      <th>Invoice</th>
      <th>Delivery note</th>
      <th>Date issued</th>
      <th>Value excluding tax</th>
      <th>Value including tax</th>
      <th>Still owed amount</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @creditor_orders.each do |creditor_order| %>
      <tr>
        <td><%= creditor_order.supplier.supplier_name %></td>
        <td><%= creditor_order.job.job_name %></td>
        <td><%= creditor_order.invoice.code %></td>
        <td><%= creditor_order.delivery_note %></td>
        <td><%= creditor_order.date_issued.strftime("%a, %d %b %Y") %></td>
        <td><%= number_to_currency(creditor_order.value_excluding_tax, unit: "R") %></td>
        <td><%= number_to_currency(creditor_order.value_including_tax, unit: "R") %></td>
        <td><%= number_to_currency(creditor_order.still_owed_amount, unit: "R") %></td>
        <td><%= link_to 'Show', creditor_order %></td>
        <td><%= link_to 'Edit', edit_creditor_order_path(creditor_order) %></td>
        <td><%= link_to 'Destroy', creditor_order, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= will_paginate @creditor_orders, renderer: WillPaginate::ActionView::Bootstrap4LinkRenderer %>

<br>

<%= link_to 'New Creditor Order', new_creditor_order_path %>
